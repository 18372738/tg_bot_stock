# Python Stock Бот: Руководство по использыванию и документация
## Оглавление
- [Описание проекта](https://gist.github.com/18372738/0dcfea586a4f87f20a959531f87e5faa#описание-проекта)
- [Роли в боте](https://gist.github.com/18372738/0dcfea586a4f87f20a959531f87e5faa#роли-в-боте)
  - [Пользователь](https://gist.github.com/18372738/0dcfea586a4f87f20a959531f87e5faa#пользователь)
  - [Исполнитель](https://gist.github.com/18372738/0dcfea586a4f87f20a959531f87e5faa#исполнитель)
- [Что понадобиться?](https://gist.github.com/18372738/0dcfea586a4f87f20a959531f87e5faa#что-понадобится)
  - [Предварительные требования](https://gist.github.com/18372738/0dcfea586a4f87f20a959531f87e5faa#предварительные-требования)
  - [Установка зависимостей](https://gist.github.com/18372738/0dcfea586a4f87f20a959531f87e5faa#установка-зависимостей)
  - [Переменные окружения](https://gist.github.com/18372738/0dcfea586a4f87f20a959531f87e5faa#переменные-окружения)
  - [Дополнительные требования](https://gist.github.com/18372738/0dcfea586a4f87f20a959531f87e5faa#дополнительные-требования)
  - [Запустить миграцию](https://gist.github.com/18372738/0dcfea586a4f87f20a959531f87e5faa#запустить-миграцию)
  - [Создать суперпользователя](https://gist.github.com/18372738/0dcfea586a4f87f20a959531f87e5faa#создать-суперпользователя) 
- [Как запустить?](https://gist.github.com/18372738/0dcfea586a4f87f20a959531f87e5faa#как-запустить)
  - [Запуск админ-панели](https://gist.github.com/18372738/0dcfea586a4f87f20a959531f87e5faa#запуск-админ-панели)
  - [Запуск бота](https://gist.github.com/18372738/0dcfea586a4f87f20a959531f87e5faa#запуск-бота)
- [Админ-панель](https://gist.github.com/18372738/0dcfea586a4f87f20a959531f87e5faa#админ-панель)
  - [Таблицы с данными](https://gist.github.com/18372738/0dcfea586a4f87f20a959531f87e5faa#таблицы-с-данными)
  - [Таблица статистики рекламы](https://gist.github.com/18372738/0dcfea586a4f87f20a959531f87e5faa#таблица-статистики-рекламы)
- [Основные скрипты](https://gist.github.com/18372738/0dcfea586a4f87f20a959531f87e5faa#основные-скрипты)
- [Цели проекта](https://gist.github.com/18372738/0dcfea586a4f87f20a959531f87e5faa#цели-проекта)
### Описание проекта
Бот для хранения личных вещей на складе. Бот предоставляет пользователям две роли на выбор: пользователь, исполнитель. 
### Роли в боте
#### Пользователь 
Данная роль позволяет ознакомиться с правилами хранения. Оставить заявку на хранение вещей. Отслеживать сроки хранения.
#### Исполнитель
Данная роль позволяет получать уведомления о новых заявках.
### Что понадобится?
#### Предварительные требования
Скачайте или склонируйте репозиторий на свой компьютер.
Python3 должен быть уже установлен. 
#### Установка зависимостей
Используйте `pip` (или `pip3`, есть конфликт с Python2) для установки зависимостей:
```
pip install -r requirements.txt
```
#### Переменные окружения
Создайте файл ```.env``` в вашей директории проекта, откройте его в любом текстовом редакторе. Вам понадобятся следующие переменные окружения:
```
VK_ACCESS_TOKEN=Сервисный токен приложения Вконтакте
TELEGRAM_TOKEN=Токен вашего бота
```
#### Дополнительные требования
Создать телеграм бота и получить токен. Для регистрации и получения токена, нужно написать в [@BotFather](https://t.me/BotFather)
```
/newbot - регистрация нового бота
/token - получить токен бота 
```
Для отслеживания статистики рекламы зарегестрируйтесь в социальной сети [Вконтакте](https://vk.com). Создайте [приложение](https://id.vk.com/about/business/go/docs/ru/vkid/latest/vk-id/connection/create-application). Получите сервисный [токен](https://id.vk.com/about/business/go/docs/ru/vkid/latest/vk-id/connection/tokens/service-token) приложения.
#### Запустить миграцию
Для настройки базы данных SQLite
```bush
python manage.py migrate
```
#### Создать суперпользователя 
Для получения логина и пароля от админ-панели
```bush
python manage.py createsuperuser
```
При запуске команды вам понадобиться ввести данные (логин, E-mail, пароль)
### Как запустить 
#### Запуск админ-панели 
```bush
python manage.py runserver
```
При запуске команды выводится url-адрес в конце которого нужно добавить ```/admin```, получится ссылка типа ```http://127.0.0.1:8000/admin```, которая откроет страницу с админ-панелью, где нужно будет ввести логин и пароль, который указывали при создании суперпользователя.
#### Запуск бота
```bush
python bot.py
```
При запуске команды, если все шаги сделали правильно, бот готов к работе.


### Админ-панель
#### Таблицы с данными
После запуска админ-понели откроется окно в котором отображены все таблицы

#### Таблица статистики рекламы
Для отслеживания статистики рекламы вам понадобиться сокращённая ссылка. 
Чтобы получить сокращённую ссылку добавьте ваш Url-адрес в поле ```Url-адрес``` и нажмите кнопку ```сохранить```
![2024-06-27_00-48-46](https://gist.github.com/assets/133884450/3602fd26-3c91-42fe-a275-190783e95434)
В таблице выберете нужную вам ссылку и из  выпадающего списка выберите ```Сократить выбранные ссылки``` 
![2024-06-27_00-50-12](https://gist.github.com/assets/133884450/0d91fd3f-3a86-428c-bdac-a96e8ac0a6b6)
Сокращенную ссылку используйте в рекламе, чтобы в данной таблице вы смогли увидеть количество переходов по ссылке. Выбрав нужную нам ссылку и из выпадающего списка выбрав ```Обновить переходы по выбранным битлинкам```.
Данные в поле ```Сокращённая ссылка``` и в поле ```Количество переходов``` заполняются автоматически.
### Основные скрипты
- [vk_utils.py](https://github.com/18372738/tg_bot_stock/blob/main/vk_utils.py)
- [admin.py](https://github.com/18372738/tg_bot_stock/blob/main/stock_models/admin.py)
- [models.py]()
- [bot.py]()
### Цели проекта
Проект написан в образовательных целях.



